{"version":3,"sources":["webpack:///./src/views/learning/vote21/Map.vue?5f94","webpack:///./src/views/learning/vote21/Map.vue?f870","webpack:///src/views/learning/vote21/Map.vue","webpack:///./src/views/learning/vote21/Map.vue?e2e6","webpack:///./src/views/learning/vote21/Map.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","province","SGG_2","partyList","candidate","party","name","_e","currentProvince","domProps","findArea","SGG_Code","final","_l","value","key","_f","staticRenderFns","MAP_GEOJSON","MAP_AREA","LOCAL_SEAT_FINAL","default","Vote21RatioBar","components","props","undefined","mapArea","localSeatData","theminjoo","no","localLock","ratioLock","color","unitedfuture","minsaengdang","futurekorea","platformparty","justice21","ourrepublican","minjung","koreaeconomy","people21","proparknew","openminjoo","etcparty","noparty","undecided","localSeatFinal","computed","summarize","drawMap","methods","Object","keys","forEach","localSeatCode","localSeat","some","item","elected","code","Array","isArray","length","findCandidate","geojson","d3","centered","divWidth","document","getElementById","clientWidth","width","height","svg","append","attr","background","g","mapLayer","classed","iconsLayer","projection","scale","translate","path","bounds","widthScale","heightScale","Math","max","xoffset","yoffset","offset","domain","clamp","range","_this","fillFn","d","pcolor","partyColor","properties","nameLength","clicked","x","y","k","centroid","openInfo","closeInfo","selectAll","style","transition","duration","mouseover","selectProvince","mouseout","n","nameFn","on","data","features","enter","zoomed","transform","zoom","scaleExtent","call","component"],"mappings":"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","file":"js/chunk-bf1898d0.7201cfdb.js","sourcesContent":["import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-wrapper\",attrs:{\"id\":\"map-wrapper\"}},[(_vm.province)?_c('div',{staticClass:\"province-title text-left\"},[_c('h3',{staticClass:\"text-center\"},[_vm._v(\" \"+_vm._s(_vm.province.SGG_2)+\" \"),_c('br'),_c('h4',[(_vm.province.candidate)?[_c('strong',[_vm._v(\" \"+_vm._s(_vm.partyList[_vm.province.candidate.party].name)+\", \"+_vm._s(_vm.province.candidate.name)+\" \")])]:_vm._e()],2)]),(!_vm.currentProvince)?_c('div',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.findArea(_vm.province.SGG_Code))}})]):_vm._e()]):_vm._e(),(_vm.currentProvince)?_c('div',{staticClass:\"province-info\"},[_c('h3',{staticClass:\"text-center\"},[_vm._v(\" \"+_vm._s(_vm.currentProvince.SGG_2)+\" \"),_c('br'),_c('h4',[(_vm.currentProvince.candidate)?[_c('strong',[_vm._v(\" \"+_vm._s(_vm.partyList[_vm.currentProvince.candidate.party].name)+\", \"+_vm._s(_vm.currentProvince.candidate.name)+\" \")])]:_vm._e()],2)]),_c('ul',{staticClass:\"text-left\"},[_c('li',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.findArea(_vm.currentProvince.SGG_Code))}})]),(_vm.currentProvince.final)?[_c('li',[_c('b-row',[_c('b-col',{staticClass:\"col-12 text-white\"},[_vm._v(\" 개표결과 \")]),_c('b-col',{staticClass:\"col-12 text-white\"},[_c('vote21-ratio-bar',{attrs:{\"party-list\":_vm.partyList,\"data\":_vm.currentProvince.final}})],1)],1)],1)]:_vm._e()],2)]):_vm._e(),(!_vm.currentProvince)?_c('div',{staticClass:\"province-summary text-left\"},[_c('h4',{staticClass:\"text-center\"},[_vm._v(\"정당별 현황\")]),_c('ul',[_vm._l((_vm.localSeatData),function(value,key){return [_c('li',{key:key},[_vm._v(_vm._s(_vm.partyList[key].name)+\" : \"+_vm._s(_vm._f(\"digit\")(value))+\" 석\")])]})],2)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"map-wrapper\" class=\"map-wrapper\">\r\n    <div v-if=\"province\" class=\"province-title text-left\">\r\n      <h3 class=\"text-center\">\r\n        {{province.SGG_2}}\r\n        <br />\r\n        <h4>\r\n          <template v-if=\"province.candidate\">\r\n            <strong>\r\n            {{ partyList[province.candidate.party].name }}, {{ province.candidate.name }}\r\n            </strong>\r\n          </template>\r\n        </h4>\r\n      </h3>\r\n      <div v-if=\"!currentProvince\">\r\n        <span v-html=\"findArea(province.SGG_Code)\"></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"currentProvince\" class=\"province-info\">\r\n      <h3 class=\"text-center\">\r\n        {{currentProvince.SGG_2}}\r\n        <br />\r\n        <h4>\r\n          <template v-if=\"currentProvince.candidate\">\r\n            <strong>\r\n            {{ partyList[currentProvince.candidate.party].name }}, {{ currentProvince.candidate.name }}\r\n            </strong>\r\n          </template>\r\n        </h4>\r\n      </h3>\r\n\r\n      <ul class=\"text-left\">\r\n        <li>\r\n          <span v-html=\"findArea(currentProvince.SGG_Code)\"></span>\r\n        </li>\r\n        <!--\r\n        <li>SGG_Code: {{currentProvince.SGG_Code}}</li>\r\n        <li>SGG_1: {{currentProvince.SGG_1}}</li>\r\n        <li>SGG_2: {{currentProvince.SGG_2}}</li>\r\n        <li>SGG_2: {{currentProvince.SGG_3}}</li>\r\n        -->\r\n        <template v-if=\"currentProvince.final\">\r\n        <li> \r\n          <b-row>\r\n            <b-col class=\"col-12 text-white\">\r\n              개표결과\r\n            </b-col>\r\n            <b-col class=\"col-12 text-white\">\r\n              <vote21-ratio-bar\r\n                :party-list=\"partyList\"\r\n                :data=\"currentProvince.final\"\r\n              ></vote21-ratio-bar>\r\n            </b-col>\r\n          </b-row>\r\n        </li>\r\n        </template>\r\n      </ul>\r\n    </div>\r\n\r\n    <div class=\"province-summary text-left\" v-if=\"!currentProvince\">\r\n      <h4 class=\"text-center\">정당별 현황</h4>\r\n      <ul>\r\n        <template v-for=\"(value, key) in localSeatData\">\r\n          <li :key=\"key\">{{ partyList[key].name }} : {{value | digit }} 석</li>\r\n        </template>\r\n      </ul>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from 'd3'\r\n\r\nconst MAP_GEOJSON = require('./map.geo.json');\r\nconst MAP_AREA = require('./map.area.json');\r\nconst LOCAL_SEAT_FINAL = require('./localseat.final').default;\r\n\r\nconst Vote21RatioBar = require('./Vote21.RatioBar').default;\r\nexport default {\r\n  components: {\r\n    \"vote21-ratio-bar\" : Vote21RatioBar,\r\n  },\r\n  props: {\r\n  },\r\n  data() {\r\n    return {\r\n      province: undefined,            // 마우스가 지역구 위에 있을 때 정보\r\n      currentProvince: undefined,     // 지역구를 클릭했을 때 정보\r\n      mapArea: MAP_AREA,              // 지역구 지역정보\r\n\r\n      localSeatData : {},             // 정당별 당선자수 요약\r\n      partyList : {\r\n        theminjoo : {name: \"더불어민주당\", no:1, localLock:false, ratioLock:true, color:\"#004EA2\"},\r\n        unitedfuture : {name: \"미래통합당\", no:2, localLock:false, ratioLock:true, color:\"#EF426F\"},\r\n        minsaengdang : {name: \"민생당\", no:3, localLock:false, ratioLock:false, color:\"#0BA95F\"},\r\n        futurekorea : {name: \"미래한국당\", no:4, localLock:true, ratioLock:false, color:\"#EF426F\"},\r\n        platformparty : {name: \"더불어시민당\", no:5, localLock:true, ratioLock:false, color:\"#0088D2\"},\r\n        justice21 : {name: \"정의당\", no:6, localLock:false, ratioLock:false, color:\"#FFCA05\"},\r\n        ourrepublican : {name: \"우리공화당\", no:7, localLock:false, ratioLock:false, color:\"#009900\"},\r\n        minjung : {name: \"민중당\", no:8, localLock:false, ratioLock:false, color:\"#F47920\"},\r\n        koreaeconomy : {name: \"한국경제당\", no:9, localLock:true, ratioLock:false, color:\"#009900\"},\r\n        people21 : {name: \"국민의당\", no:10, localLock:true, ratioLock:false, color:\"#EA5504\"},\r\n        proparknew : {name: \"친박신당\", no:11, localLock:false, ratioLock:false, color:\"#BBBBBB\"},\r\n        openminjoo : {name: \"열린민주당\", no:12, localLock:true, ratioLock:false, color:\"#004098\"},\r\n        etcparty : {name: \"기타\", localLock:false, ratioLock:false, color:\"#BBBBBB\"},\r\n        noparty : {name: \"무소속\", localLock:false, ratioLock:true, color:\"#AAAAAA\"},\r\n        undecided : {name: \"무당층\", localLock:true, ratioLock:false, color:\"#CCCCCC\"},\r\n      },\r\n      localSeatFinal : LOCAL_SEAT_FINAL,\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  created() {\r\n    this.summarize();\r\n  },\r\n  mounted() {\r\n    this.drawMap();\r\n  },\r\n\r\n  methods: {\r\n    // 정당별 당선자수 요약\r\n    summarize() {\r\n      this.localSeatData = {};\r\n      Object.keys(this.localSeatFinal).forEach(localSeatCode => {\r\n        let candidate = null;\r\n        const localSeat = this.localSeatFinal[localSeatCode];\r\n        localSeat.some((item) => {\r\n          if(item.elected === true) {\r\n            candidate = item;\r\n            return true;\r\n          }\r\n        });\r\n        if(candidate) {\r\n          if(candidate.party in this.localSeatData) {\r\n            this.localSeatData[candidate.party]++;\r\n          } else {\r\n            this.localSeatData[candidate.party] = 1;\r\n          }\r\n        }\r\n      });\r\n      // console.log(this.localSeatData);\r\n    },\r\n    // 지역구의 지역 정보 찾기\r\n    findArea(code) {\r\n      // console.log(code);\r\n      if(code in this.mapArea) {\r\n        return Array.isArray(this.mapArea[code]) && this.mapArea[code].length >= 2 ? this.mapArea[code][1] : \"\";\r\n      }\r\n      return \"\";\r\n    },\r\n    // 지역구의 당선자 찾기\r\n    findCandidate(code) {\r\n      let candidate = null;\r\n      const localSeat = this.localSeatFinal[code];\r\n      localSeat.some((item) => {\r\n        if(item.elected === true) {\r\n          candidate = item;\r\n          return true;\r\n        }\r\n      });\r\n\r\n      return candidate;\r\n    },\r\n    // 선택된 지역구\r\n    selectProvince(province) {\r\n      if(province) {\r\n        // console.log(province);\r\n        // console.log(this.findCandidate(province.SGG_Code));\r\n        province.candidate = this.findCandidate(province.SGG_Code);\r\n      }\r\n      this.province = province;\r\n    },\r\n\r\n    // 지역구 정보 열기\r\n    openInfo(province) {\r\n      // console.log(province);\r\n      if(province) {\r\n        province.candidate = this.findCandidate(province.SGG_Code);\r\n        province.final = this.localSeatFinal[province.SGG_Code];\r\n      }\r\n      this.currentProvince = province;\r\n    },\r\n    // 지역구 정보 닫기\r\n    closeInfo() {\r\n      this.currentProvince = undefined;\r\n    },\r\n\r\n    partyColor(code) {\r\n      let color = null;\r\n      const localSeatCode = \"\" + code;\r\n      if(localSeatCode in this.localSeatFinal) {\r\n        const localSeat = this.localSeatFinal[localSeatCode];\r\n        let candidate = null;\r\n        localSeat.some((item) => {\r\n          if(item.elected === true) {\r\n            candidate = item;\r\n            return true;\r\n          }\r\n        });\r\n        if(candidate) {\r\n          const party = candidate.party;\r\n          color = this.partyList[party].color;\r\n        }\r\n      }\r\n      return color;\r\n    },\r\n\r\n\r\n    // https://codepen.io/lantoine/pen/ExxEGxg\r\n    // https://m.blog.naver.com/PostView.nhn?blogId=jhc9639&logNo=221195987416&proxyReferer=https%3A%2F%2Fwww.google.com%2F\r\n    drawMap() {\r\n      // 지도정보\r\n      const geojson = MAP_GEOJSON;\r\n      // 지도의 중심점 찾기\r\n      const center = d3.geoCentroid(geojson);\r\n\r\n      let centered = undefined;\r\n\r\n      // 현재의 브라우저의 크기 계산\r\n      const divWidth = document.getElementById(\"map-wrapper\").clientWidth;\r\n      const width = (divWidth < 1000) ? divWidth * 0.9 : 1000;\r\n      const height = width * 1;\r\n\r\n      // 지도를 그리기 위한 svg 생성\r\n      const svg = d3\r\n      // .select('.d3')\r\n        .select('.map-wrapper')\r\n        .append('svg')\r\n        .attr('width', width)\r\n        .attr('height', height);\r\n\r\n      // 배경 그리기\r\n      const background = svg.append('rect')\r\n        .attr('class', 'background')\r\n        .attr('width', width)\r\n        .attr('height', height)\r\n\r\n      // 지도가 그려지는 그래픽 노드(g) 생성\r\n      const g = svg.append('g');\r\n      // const effectLayer = g.append('g').classed('effect-layer', true);\r\n      // 지도가 그려지는 그래픽 노드\r\n      const mapLayer = g.append('g').classed('map-layer', true);\r\n      // 아이콘이 그려지는 그래픽 노드\r\n      const iconsLayer = g.append('g').classed('icons-layer', true);\r\n\r\n      // 지도의 출력 방법을 선택(메로카토르)\r\n      let projection = d3.geoMercator()\r\n        .scale(1)\r\n        .translate([0, 0]); \r\n\r\n      // svg 그림의 크기에 따라 출력될 지도의 크기를 다시 계산\r\n      const path = d3.geoPath().projection(projection);\r\n      const bounds = path.bounds(geojson);\r\n      const widthScale = (bounds[1][0] - bounds[0][0]) / width; \r\n      const heightScale = (bounds[1][1] - bounds[0][1]) / height; \r\n      const scale = 0.95 / Math.max(widthScale, heightScale);\r\n      const xoffset = width/2 - scale * (bounds[1][0] + bounds[0][0]) /2 + 0; \r\n      const yoffset = height/2 - scale * (bounds[1][1] + bounds[0][1])/2 + 0; \r\n      const offset = [xoffset, yoffset];\r\n      projection.scale(scale).translate(offset);\r\n\r\n      const color = d3.scaleLinear()\r\n        .domain([1, 20])\r\n        .clamp(true)\r\n        // .range(['#08304b', '#08304b']);\r\n        .range(['#595959', '#595959']);\r\n\r\n      const _this = this;\r\n      // Get province color\r\n      function fillFn(d){\r\n        // console.log(d, nameLength(d));\r\n        // console.log(d.properties);\r\n\r\n        const pcolor = _this.partyColor(d.properties.SGG_Code);\r\n        if(pcolor) {\r\n          return pcolor;\r\n        }\r\n\r\n        return color(nameLength(d));\r\n      }\r\n\r\n      function clicked(d) {\r\n        var x, y, k;\r\n\r\n        // Compute centroid of the selected path\r\n        if (d && centered !== d) {\r\n          var centroid = path.centroid(d);\r\n          x = centroid[0];\r\n          y = centroid[1];\r\n          k = 4;\r\n          centered = d;\r\n          _this.openInfo(d.properties);\r\n        } else {\r\n          x = width / 2;\r\n          y = height / 2;\r\n          k = 1;\r\n          centered = null;\r\n          _this.closeInfo();\r\n        }\r\n\r\n        // Highlight the clicked province\r\n        mapLayer.selectAll('path')\r\n          .style('fill', function(d){\r\n            return centered && d===centered ? '#D5708B' : fillFn(d);\r\n        });\r\n\r\n        // Zoom\r\n        g.transition()\r\n          .duration(750)\r\n          .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')scale(' + k + ')translate(' + -x + ',' + -y + ')');\r\n      }\r\n\r\n\r\n      function mouseover(d){\r\n        // Highlight hovered province\r\n        d3.select(this).style('fill', '#1483ce');\r\n        // d3.select(this).style('fill', '#004EA2');\r\n        if(d) {\r\n          // console.log(d.properties);\r\n          _this.selectProvince(d.properties);\r\n        }\r\n      }\r\n\r\n      function mouseout(d){\r\n        _this.selectProvince(undefined);\r\n        // Reset province color\r\n        mapLayer.selectAll('path')\r\n          .style('fill', (d) => {\r\n            return centered && d===centered ? '#D5708B' : fillFn(d);\r\n          });\r\n      }\r\n\r\n      // Get province name length\r\n      function nameLength(d){\r\n        const n = nameFn(d);\r\n        return n ? n.length : 0;\r\n      }\r\n\r\n      // Get province name\r\n      function nameFn(d){\r\n        return d && d.properties ? d.properties.name : null;\r\n      }\r\n\r\n      // Add background\r\n      background\r\n        .on('click', clicked);\r\n\r\n      // 지도 그리기\r\n      mapLayer\r\n        .selectAll('path')\r\n        .data(geojson.features)\r\n        .enter().append('path') \r\n        .attr('d', path)\r\n        .attr('vector-effect', 'non-scaling-stroke')\r\n        .style('fill', fillFn)\r\n        .on('mouseover', mouseover)\r\n        .on('mouseout', mouseout)\r\n        .on('click', clicked);\r\n\r\n      const iconsInfo = [\r\n        {\r\n          \"name\":\"서울\",\r\n          \"lat\" : \"37.532600\",\r\n          \"lon\" : \"126.904612\"\r\n        },\r\n        {\r\n          \"name\":\"대전\",\r\n          \"lat\" : \"36.3730178\",\r\n          \"lon\" : \"127.2483736\"\r\n        }\r\n      ];\r\n\r\n      // 아이콘 그리기\r\n      // iconsLayer\r\n      //   .selectAll('svg')\r\n      //   .data(iconsInfo)\r\n      //   .enter()  \r\n      //   .append(\"svg:image\")\r\n      //   .attr(\"width\", 30)\r\n      //   .attr(\"height\", 30)\r\n      //   .attr('x',  d=> projection([d.lon, d.lat])[0])\r\n      //   .attr('y',  d=> projection([d.lon, d.lat])[1])\r\n      //   .attr('opacity', 0)\r\n      //   .attr(\"xlink:href\", require(\"./medal.svg\")) \r\n      //   .on('click', d => {\r\n      //     console.log(d)\r\n      //   })\r\n      //   .transition()\r\n      //   .ease(d3.easeElastic)\r\n      //   .duration(2000)\r\n      //   .delay((d, i)=> i * 50)\r\n      //   .attr('opacity', 1)\r\n      //   .attr('y',  d=> projection([d.lon, d.lat])[1])\r\n\r\n      // 확대/축소 이벤트 처리\r\n      const zoomed = () =>{\r\n        mapLayer.attr('transform', d3.event.transform)\r\n        iconsLayer.attr('transform', d3.event.transform)\r\n      }\r\n      const zoom = d3.zoom().scaleExtent([1, 8]).on('zoom', zoomed)\r\n      svg.call(zoom)\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.map-wrapper {\r\n  position:relative;\r\n  text-align: center;\r\n\r\n  // svg {\r\n  //   border: 1px solid #aaaaaa;\r\n  // }\r\n\r\n  .province-title {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 40px;\r\n    width: 600px;\r\n    color: white;\r\n    z-index: 100;\r\n    pointer-events: none;\r\n    font-size: 0.9rem;\r\n  }\r\n  .province-info {\r\n    // background: white;\r\n    position: absolute;\r\n    color: white;\r\n    top: 50px;\r\n    right: 60px;\r\n    width: 600px;\r\n    height: 500px;\r\n    z-index: 101;\r\n    font-size: 0.9rem;\r\n    pointer-events: none;\r\n  }\r\n  .province-state {\r\n    // background: white;\r\n    position: absolute;\r\n    color: white;\r\n    bottom: 200px;\r\n    right: 10px;\r\n    width: 300px;\r\n    z-index: 102;\r\n    pointer-events: none;\r\n  }\r\n  .province-summary {\r\n    // background: white;\r\n    position: absolute;\r\n    color: white;\r\n    bottom: 10px;\r\n    right: 10px;\r\n    width: 300px;\r\n    z-index: 103;\r\n    pointer-events: none;\r\n  }\r\n  .province-state > ul, .province-summary > ul {\r\n    list-style: none;\r\n  }\r\n  .background {\r\n    /* fill: #021019; */\r\n    fill: transparent;\r\n    pointer-events: all;\r\n  }\r\n  .map-layer {\r\n    fill: #08304b;\r\n    stroke: #021019;\r\n    stroke-width: 1px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=3ae8c6fb&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}